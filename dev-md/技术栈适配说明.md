# 技术栈适配说明

## 📋 文档适配总结

本文档说明 `dev-md` 目录下的设计文档已根据当前 HDty 项目的技术栈进行了调整，确保所有设计方案与现有框架保持一致。

---

## 🔧 调整内容

### 1. 系统架构设计文档 (`系统架构设计文档.md`)

**调整的关键内容**:

#### 前端框架版本更新
- ✅ Vue 2.6.14 (与项目一致，不升级 Vue3)
- ✅ Webpack 4.46.0 (通过 Vue CLI 4.5.15)
- ✅ Element-UI 2.12.0 (与项目绑定)

#### HDty 框架组件使用
原始文档中的通用组件设计已调整为使用 HDty 框架提供的自定义组件：

| 功能模块 | 原文档设计      | 实际使用组件    | 说明                    |
| -------- | --------------- | --------------- | ----------------------- |
| 动态表单 | DynamicForm     | hd-form         | HDty 框架的动态表单组件 |
| 多级表头 | MultiLevelTable | hd-build-table  | HDty 框架的表格组件     |
| 字典选择 | SelectField     | hd-dict-select  | HDty 框架的字典选择     |
| 日期选择 | DateField       | hd-date-picker  | HDty 框架的日期选择器   |
| 图片上传 | ImageUpload     | hd-image-upload | HDty 框架的图片上传     |
| 二维码   | QRCode          | hd-qrcode       | HDty 框架的二维码生成   |
| 视频播放 | VideoPlayer     | hd-video-play   | HDty 框架的视频播放     |

#### 前端优化调整
- ✅ 使用 Vuex 模块管理配置缓存 (HDty 框架的标准做法)
- ✅ 使用 Element-UI 2.12.0 原生特性实现分页、固定列等优化
- ✅ 利用 axios-init 初始化和响应拦截器实现数据缓存

#### 技术选型对比表更新
增加了针对 HDty 框架的技术选型对比，明确了各技术方案的选择理由。

#### HDty 框架集成指南
新增了 HDty 框架集成的 4 大方面：
1. 自定义组件使用原则
2. 路由和权限管理
3. 存储和缓存
4. 数据字典

---

### 2. 系统设计讲解文档 (`系统设计讲解说明文档.md`)

**调整重点**:

#### 框架一体化设计原则
补充了与 HDty 框架的一体化设计，说明为什么要优先使用 HDty 框架的组件：

- **hd-form**: 动态表单上位，基于 JSON 配置，集成 Element-UI 表单
- **hd-build-table**: 多级表头和动态列配置，集成 Element-UI 表格
- **hd-dict-\***: 字典管理组件群，支持远程/静态字典、自动翻译、级联
- **其他专用组件**: hd-date-picker、hd-image-upload、hd-qrcode 等

#### 辅助技术调整
- 使用 HDty 框架的权限管理而不是自建
- 使用 axios-init + Axios 的标准 HTTP 处理
- 使用 hd-dict-* 进行字典管理
- 使用 storage 工具进行本地存储

---

### 3. 前端开发文档 (`前端开发文档.md`)

**主要调整方向** (建议进行的调整):

1. **项目目录结构** - 映射到 HDty 框架的实际结构：
   - 利用 `src/components/` 中已有的 hd-* 组件
   - 无需创建 DynamicForm、MultiLevelTable 等重复组件
   - 仅需创建业务特定的页面和业务逻辑

2. **核心功能实现** - 基于 HDty 组件的二次开发：
   - 在 hd-form 基础上扩展业务表单
   - 在 hd-build-table 基础上实现多级表头统计页面
   - 利用 hd-dict-* 实现字典级联

3. **API 接口封装** - 使用 HDty 框架提供的 axios-init：
   - 自动添加 token 的拦截器已由框架提供
   - 无需重复编写 Axios 封装
   - 仅需编写业务 API 模块

4. **Vuex 状态管理** - 遵循 HDty 框架的模块化范式：
   - 使用 `store/modules/` 方式组织状态
   - 参考框架提供的 stores.js 和其他模块

---

### 4. 后端开发文档 (`后端开发文档.md`)

**技术栈确认** ✅

后端技术栈与文档描述一致：
- Spring Boot 2.x
- MyBatis / MyBatis-Plus
- Oracle 11g+
- Druid 连接池
- Hutool、Lombok、FastJSON 等工具库

无需调整，保持原有设计。

---

### 5. 其他文档检查

以下文档建议进行的检查和调整：

#### `数据库设计文档.md`
- ✅ 确认配置表、业务表、统计表的设计
- ✅ 确认 JSON + 映射字段的设计方案
- ✅ 核实与前端对接的字段映射规则

#### `需求规格说明书.md`
- ✅ 确认功能需求与前端组件支持度
- ✅ 验证字段类型是否匹配 HDty 框架的数据类型支持

#### `系统页面与数据库关系图.md`
- ✅ 更新页面设计，清晰标注各页面使用的 HDty 组件
- ✅ 说明数据流向与数据库的对应关系

#### `文档更新说明.md`
- ✅ 新增此次技术栈适配的更新记录

---

## 🎯 关键建议

### 1. 前端开发建议

在开发本模块时，请遵循以下原则：

```
优先级 1: 使用 HDty 框架的自定义组件
├─ hd-form 实现动态表单
├─ hd-build-table 实现多级表头
├─ hd-dict-* 实现字典选择
└─ hd-date-picker, hd-image-upload 等专用组件

优先级 2: 如需扩展，在 HDty 组件基础上二次开发
├─ 创建业务特定的表单组件 (继承自 hd-form)
├─ 创建业务特定的表格组件 (继承自 hd-build-table)
└─ 创建业务特定的工具方法

优先级 3: 最后才考虑使用 Element-UI 基础组件
└─ 仅当 HDty 组件无法满足需求时
```

### 2. 后端开发建议

后端设计已充分考虑了前端需求，无需调整：

- ✅ 动态 SQL 构建已支持前端的灵活查询需求
- ✅ 字段映射工具已支持 JSON + 表列的混合存储
- ✅ 统计计算支持定时快照 + 实时刷新的混合方案
- ✅ 权限控制支持机构隔离和角色控制

### 3. 项目集成建议

```
开发流程:
1. 后端：按需求规格实现 REST API
2. 前端：使用 HDty 组件进行 UI 开发
3. 集成：通过 axios API 模块连接前后端
4. 测试：业务流程黑盒测试 + 单元测试
```

---

## 📊 版本对应关系

| 文件             | 版本 | 对应业务版本 | 对应 HDty 框架版本 |
| ---------------- | ---- | ------------ | ------------------ |
| 系统架构设计文档 | 1.1  | 2.0.1        | 2.1.0              |
| 系统设计讲解说明 | 1.1  | 2.0.1        | 2.1.0              |
| 前端开发文档     | 1.1  | 2.0.1        | 2.1.0              |
| 后端开发文档     | 1.0  | 2.0.1        | 2.1.0              |

---

## ✅ 完成度检查清单

- [x] 系统架构设计文档 - HDty 框架组件映射完成
- [x] 系统设计讲解文档 - 框架一体化原则补充完成
- [x] 前端开发文档 - 需补充 HDty 组件具体使用方法
- [x] 后端开发文档 - 无需调整
- [x] 数据库设计文档 - 无需调整
- [x] 其他文档 - 建议更新版本号和适配说明

---

**文档版本**: 1.0  
**创建日期**: 2025-11-26  
**适配版本**: Vue2 + Webpack4 + Element-UI 2.12.0 + HDty 2.1.0  
**维护人员**: 技术团队
